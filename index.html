<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Tempahan Baju AX200S 2.0</title>

<style>
body {
  font-family: Arial;
  max-width: 900px;
  margin: auto;
  padding: 20px;
}

h1 {
  text-align: center;
}

input, select {
  width: 100%;
  padding: 10px;
  margin-bottom: 15px;
}

button {
  padding: 12px;
  width: 100%;
  cursor: pointer;
  background: black;
  color: white;
  border: none;
}

button:hover {
  background: #333;
}

.item-box {
  border: 1px solid #ccc;
  padding: 10px;
  margin-top: 5px;
}

.total {
  font-size: 20px;
  font-weight: bold;
  margin-top: 20px;
}
</style>
</head>

<body>

<h1>Tempahan Baju AX200S Family Terengganu 2.0</h1>

<h2>Maklumat Pelanggan</h2>
<input type="text" id="nama" placeholder="Nama Penuh">
<input type="text" id="phone" placeholder="No HP">
<input type="text" id="alamat" placeholder="Alamat (Isi jika perlu postage)">

<h2>Tambah Item</h2>

<select id="kategori">
<option value="dewasa_pendek">Dewasa Lengan Pendek (RM35)</option>
<option value="dewasa_panjang">Dewasa Lengan Panjang (RM38)</option>
<option value="kanak">Kanak-Kanak (RM35)</option>
</select>

<select id="saiz">
<option>XS</option><option>S</option><option>M</option>
<option>L</option><option>XL</option><option>2XL</option>
<option>3XL</option><option>4XL</option>
<option>5XL</option><option>6XL</option>
<option>7XL</option>
</select>

<input type="number" id="qty" value="1" min="1">

<button onclick="tambahItem()">Tambah Item</button>

<h2>Senarai Tempahan</h2>
<div id="senarai"></div>

<div class="total">
Jumlah Keseluruhan: RM <span id="total">0</span>
</div>

<br>
<button onclick="hantarOrder()">Hantar Tempahan</button>

<script>

let total = 0;
let orderList = [];

function kiraHarga(kategori, saiz) {

  if (kategori === "kanak") return 35;

  let harga = (kategori === "dewasa_pendek") ? 35 : 38;

  const tambahan = {
    "3XL":2,
    "4XL":4,
    "5XL":6,
    "6XL":8,
    "7XL":10
  };

  if (tambahan[saiz]) {
    harga += tambahan[saiz];
  }

  return harga;
}

function tambahItem() {

  let kategori = document.getElementById("kategori").value;
  let saiz = document.getElementById("saiz").value;
  let qty = parseInt(document.getElementById("qty").value);

  if (qty <= 0) return;

  let harga = kiraHarga(kategori, saiz);
  let jumlah = harga * qty;

  total += jumlah;

  let detail =
    kategori.replace("_"," ").toUpperCase() +
    " - " + saiz +
    " x " + qty +
    " = RM" + jumlah;

  orderList.push(detail);

  let div = document.createElement("div");
  div.className = "item-box";
  div.innerHTML = detail;

  document.getElementById("senarai").appendChild(div);
  document.getElementById("total").innerText = total;

  document.getElementById("qty").value = 1;
}

function hantarOrder() {

  let nama = document.getElementById("nama").value;
  let phone = document.getElementById("phone").value;
  let alamat = document.getElementById("alamat").value;

  if (!nama || !phone || orderList.length === 0) {
    alert("Sila lengkapkan maklumat dan tambah item.");
    return;
  }

  let orderText = orderList.join(" | ");

  // Hantar ke Google Sheet
  fetch("https://script.google.com/macros/s/AKfycbySfoJvZOm0KefXhZPwmlPIcbtIOaficju6DmL7jrOymIgn4rH_fKgk0qozzEMFf3_T/exec", {
    method: "POST",
    body: JSON.stringify({
      nama: nama,
      phone: phone,
      alamat: alamat,
      orderDetail: orderText,
      total: total
    })
  });

  // Format mesej WhatsApp
  let message =
    "Tempahan AX200S Family Terengganu 2.0\n\n" +
    "Nama: " + nama + "\n" +
    "No HP: " + phone + "\n" +
    "Alamat: " + (alamat ? alamat : "Ambil Sendiri") + "\n\n" +
    orderText + "\n\n" +
    "Jumlah: RM" + total;

  let encodedMessage = encodeURIComponent(message);

  // WhatsApp ke Sukor
  window.open("https://wa.me/60169514414?text=" + encodedMessage);

  alert("Tempahan berjaya dihantar!");

  document.getElementById("senarai").innerHTML = "";
  document.getElementById("total").innerText = "0";
  total = 0;
  orderList = [];
}

</script>

</body>
</html>
