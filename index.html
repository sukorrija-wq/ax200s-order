<!DOCTYPE html>
<html>
<head>
  <base target="_top">
  <script>
    let items = [];

    function tambahItem() {
      let kategori = document.getElementById("kategori").value;
      let jenis = document.getElementById("jenis").value;
      let saiz = document.getElementById("saiz").value;
      let qty = parseInt(document.getElementById("qty").value);

      if (!qty || qty <= 0) {
        alert("Masukkan kuantiti yang sah");
        return;
      }

      let harga = 0;

      if (kategori === "Dewasa") {
        harga = (jenis === "Short Sleeve") ? 35 : 38;

        let extra = {
          "3XL": 2,
          "4XL": 4,
          "5XL": 6,
          "6XL": 8,
          "7XL": 10
        };

        if (extra[saiz]) {
          harga += extra[saiz];
        }

      } else {
        harga = 35;
      }

      let totalItem = harga * qty;

      items.push({
        kategori, jenis, saiz, qty, harga, totalItem
      });

      paparkanItem();
      kiraTotal();

      document.getElementById("qty").value = "";
    }

    function paparkanItem() {
      let senarai = document.getElementById("senarai");
      senarai.innerHTML = "";

      items.forEach((item) => {
        senarai.innerHTML += `
          <p>
          ${item.kategori} | ${item.jenis} | ${item.saiz} | 
          ${item.qty} helai = RM${item.totalItem}
          </p>
        `;
      });
    }

    function kiraTotal() {
      let total = items.reduce((sum, item) => sum + item.totalItem, 0);
      document.getElementById("jumlah").value = total;
    }

    function sebelumSubmit() {
      let detailText = items.map(item =>
        `${item.kategori}-${item.jenis}-${item.saiz} x${item.qty}`
      ).join(" | ");

      document.getElementById("detail").value = detailText;

      if (items.length === 0) {
        alert("Sila tambah sekurang-kurangnya satu item.");
        return false;
      }
    }
  </script>
</head>

<body>
  <h2>Order Baju AX200S Family Terengganu 2.0</h2>

  <form method="post" onsubmit="return sebelumSubmit()">

    Nama:<br>
    <input type="text" name="nama" required><br><br>

    No Telefon:<br>
    <input type="text" name="telefon" required><br><br>

    Alamat Penghantaran:<br>
    <textarea name="alamat" required></textarea><br><br>

    <hr>
    <h3>Tambah Item</h3>

    Kategori:
    <select id="kategori">
      <option>Dewasa</option>
      <option>Kanak-Kanak</option>
    </select><br><br>

    Jenis:
    <select id="jenis">
      <option>Short Sleeve</option>
      <option>Long Sleeve</option>
    </select><br><br>

    Saiz:
    <select id="saiz">
      <option>XS</option>
      <option>S</option>
      <option>M</option>
      <option>L</option>
      <option>XL</option>
      <option>2XL</option>
      <option>3XL</option>
      <option>4XL</option>
      <option>5XL</option>
      <option>6XL</option>
      <option>7XL</option>
    </select><br><br>

    Kuantiti:
    <input type="number" id="qty"><br><br>

    <button type="button" onclick="tambahItem()">Tambah Item</button>

    <hr>

    <h3>Senarai Order</h3>
    <div id="senarai"></div>

    <h3>Total Bayaran (RM)</h3>
    <input type="text" name="jumlah" id="jumlah" readonly><br><br>

    <input type="hidden" name="detail" id="detail">

    <button type="submit">Hantar Tempahan</button>

  </form>
</body>
</html>
